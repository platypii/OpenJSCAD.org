import test from 'ava'

import { geom2 } from '../../geometries/index.js'
import { torus } from '../../primitives/index.js'

import { project } from './index.js'
import { unionGeom2 } from '../booleans/unionGeom2.js'

// project({ axis: [0, 1, 0], origin: [0, -1, 0] }, torus({ innerSegments: 8, outerSegments: 4 }))

// test('project (WTF)', (t) => {
//   const g1 = geom2.create([[
//     [ -5, 0 ],
//     [ -4.707106781186548, -0.7071067811865475 ],
//     [ -4, -1 ],
//     [ 0, -1 ],
//     [ 4, -1 ],
//     [ 4.707106781186548, -0.7071067811865475 ],
//     [ 5, 0 ],
//     [ 4.707106781186547, 0.7071067811865477 ],
//     [ 3.477592250072517, 0.7836116248912244 ],
//     [ 4, 1 ],
//     [ 0, 1 ],
//     [ -4, 1 ],
//     [ -4.707106781186547, 0.7071067811865477 ],
//     [ -3.552713678800501e-15, 0.7071067811865477 ],
//     [ 0, 0.7071067811865475 ],
//     [ 3, 0 ],
//     [ 0, 0 ],
//     [ 0, 0.7071067811865475 ],
//     [ 0, 0.7071067811865477 ],
//     [ 3.2928932188134494, 0.7071067811865477 ],
//     [ 3.292893218813452, 0.7071067811865475 ],
//     [ 3.2928932188134525, 0.7071067811865477 ],
//     [ 4.707106781186547, 0.7071067811865477 ],
//     [ 3.2928932188134517, -0.7071067811865472 ],
//     [ 3.2928932188134525, -0.7071067811865475 ],
//     [ 3.2928932188134517, -0.7071067811865475 ],
//     [ 3.2928932188134517, -0.7071067811865472 ],
//     [ -0.7071067811865461, 0 ],
//     [ 0, 0 ],
//     [ -3.292893218813452, 0.7071067811865475 ],
//     [ -3.181158222542178, 0.4373546377967298 ],
//     [ -4.707106781186547, 0.7071067811865477 ],
//     [ -5, 0 ]
//   ]])
//   const g2 = geom2.create([[
//     [ 4.707106781186547, 0.7071067811865477 ],
//     [ 4, 1 ],
//     [ 0, 1 ],
//     [ 4.707106781186547, 0.7071067811865477 ]
//   ]])
//   const result = unionGeom2(g1, g2)
//   t.true(true)
// })

test('project (WTF)', (t) => {
  const g1 = geom2.create([[
    [ -5, 0 ], // A
    [ 4.707106781186547, 0.7071067811865477 ], // B
    [ 3.477592250072517, 0.7836116248912244 ], // E
    [ 4, 1 ], // C
  ]])
  const g2 = geom2.create([[
    [ 4.707106781186547, 0.7071067811865477 ], // B
    [ 4, 1 ], // C
    [ 0, 1 ], // D
    // [ 3.477592250072517, 0.7836116248912244 ], // E
  ]])
  const result = unionGeom2(g1, g2)
  // console.log("result", result.outlines)
  t.notThrows(() => geom2.validate(result))
})
